<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>å°åŒ—ä¸€å€ä¸Šç­å°åŠ©æ‰‹ğŸ’¼</title>

<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="å°åŒ—ä¸€å€ä¸Šç­å°åŠ©æ‰‹">

<style>
:root{
  --primary:#f4a300;
  --border:#e0e0e0;
  --bg:#f6f6f8;

  --btn-generate:#2B7344;
  --btn-copy:#B51A17;
}

*,*::before,*::after{ box-sizing:border-box; }

body{
  font-family:-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  margin:0;
  padding:14px 14px 90px;
  background:#dfeaf3;
  display:flex;
  justify-content:center;
  color:#111;
  overflow-x:hidden;
}

.container{
  width:100%;
  max-width:520px;
  margin-left:auto;
  margin-right:auto;
}

h1{ text-align:center; margin:6px 0 2px; font-size:22px; font-weight:700; }
.subtitle{ text-align:center; font-size:13px; color:#777; margin-bottom:8px; }

/* ğŸ”¹ åˆ†é æ¨™ç±¤ */
.tab-header{
  display:flex;
  gap:8px;
  margin-bottom:10px;
}
.tab-header button{
  flex:1;
  padding:8px 0;
  border-radius:20px;
  border:1px solid var(--border);
  background:#fff;
  font-size:14px;
}
.tab-header button.active{
  background:var(--primary);
  color:#fff;
  border-color:var(--primary);
}

/* ç™½è‰²å¡ç‰‡æ¨£å¼ */
.section{
  background:#faf7ef;
  border-radius:14px;
  border:1px solid var(--border);
  padding:14px;
  margin-bottom:12px;
  overflow:visible;
  position:relative;
}

/* ğŸ… æ¯å€‹ç™½è‰²å€å¡Šå·¦ä¸Šè§’è–èª•å¸½ï¼ˆæ­£å¼ç‰ˆï¼šåŒå±¤è·¯å¾‘ï¼‰ */
.section::after{
  content:"";
  position:absolute;
  top:-25px;
  left:-10px;
  right:auto;
  width:42px;
  height:42px;
  background-image:url("santa-hat.png");
  background-size:contain;
  background-repeat:no-repeat;
  background-position:center;
  transform:rotate(-25deg);
  transform-origin:50% 80%;
  pointer-events:none;
  z-index:1;
}

.section h2{ margin:0 0 8px; font-size:16px; font-weight:700; }

label{ display:block;font-size:14px;margin-top:4px; }

input,select{
  width:100%;
  padding:10px; font-size:16px;
  margin-top:4px; margin-bottom:10px;
  border-radius:10px; border:1px solid var(--border);
  background:#fff;
}

input[type="date"]{
  width:94%;
  margin:auto;
  display:block;
}

input[readonly]{ background:#f3f3f3; }

textarea{
  width:100%; height:200px; padding:10px;
  font-size:15px; border-radius:10px;
  border:1px solid var(--border);
}

/* åº•éƒ¨æŒ‰éˆ•åˆ— */
.actions{
  position:fixed;left:0;right:0;bottom:0;
  padding:10px 14px 12px;background:#ffffffee;
  display:flex;gap:10px;border-top:1px solid var(--border);
  backdrop-filter:blur(6px);
  z-index:50;
}

button{
  padding:12px 0;
  border-radius:26px;
  border:none;
  font-size:16px;
  font-weight:600;
}

.btn-primary{
  flex:1;
  background:var(--btn-generate);
  color:#fff;
  border:1px solid var(--btn-generate);
}

.btn-secondary{
  flex:1;
  background:var(--btn-copy);
  color:#fff;
  border:1px solid var(--btn-copy);
}

/* =============== â„ Snow Animation =============== */
.snow {
  pointer-events:none;
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  overflow:hidden;
  z-index:30;
}

.snow span {
  position:absolute;
  top:-10px;
  display:block;
  width:8px; height:8px;
  background:rgba(255,255,255,.95);
  border-radius:50%;
  animation:snowfall 12s linear infinite;
  opacity:.9;
}

@keyframes snowfall {
  0%   { transform:translate3d(0, -10px, 0); }
  100% { transform:translate3d(25px, 110vh, 0); }
}

.snow span:nth-child(10n+1){ left:5%; }
.snow span:nth-child(10n+2){ left:15%; }
.snow span:nth-child(10n+3){ left:25%; }
.snow span:nth-child(10n+4){ left:35%; }
.snow span:nth-child(10n+5){ left:45%; }
.snow span:nth-child(10n+6){ left:55%; }
.snow span:nth-child(10n+7){ left:65%; }
.snow span:nth-child(10n+8){ left:75%; }
.snow span:nth-child(10n+9){ left:85%; }
.snow span:nth-child(10n+10){ left:95%; }

.snow span:nth-child(odd) { width:6px;height:6px;animation-duration:10s;opacity:.8;}
.snow span:nth-child(3n)  { width:10px;height:10px;animation-duration:14s;opacity:.75;}
.snow span:nth-child(4n)  { animation-delay:3s;transform:translateX(-10px);}
.snow span:nth-child(5n)  { animation-duration:18s;}
.snow span:nth-child(7n)  { width:12px;height:12px;opacity:.6;}

/* ğŸ„ æ§²å¯„ç”Ÿï¼ˆæ­£å¼ç‰ˆï¼šåŒå±¤è·¯å¾‘ï¼‰ */
.section::marker{}
.section .mistletoe{
  content:"";
  position:absolute;
  bottom:-25px;
  right:-20px;
  width:65px;
  height:65px;
  background-image:url("mistletoe.png");
  background-size:contain;
  background-repeat:no-repeat;
  background-position:center;
  transform:rotate(45deg);
  transform-origin:50% 50%;
  pointer-events:none;
  z-index:8;
  opacity:0.95;
}

/* ğŸ”¹ é¡¯ç¤º / éš±è—ç”¨ */
.hidden{ display:none; }

/* ğŸ”¹ Morning Huddle åˆ—æ’ç‰ˆ */
.huddle-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:8px;
  font-size:15px;
}
.huddle-label{ color:#333; }
.huddle-value{ font-weight:600; color:#000; }

/* ğŸ”¹ åˆ†çµ„åˆ†éš”ç·š */
.huddle-separator{
  height:1px;
  background:#ddd;
  margin:12px 0;
  opacity:0.7;
}

/* ğŸ”¹ æ˜¨æ—¥åŸ·è¡Œæª¢è¦– */
.check-row{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-top:10px;
  font-size:14px;
  line-height:1.35;
}
.check-label{
  color:#333;
  min-width:92px;
}
.check-value{
  text-align:right;
  font-weight:600;
  color:#111;
  max-width:72%;
}
.badge{
  display:inline-block;
  margin-left:6px;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  vertical-align:middle;
}
.badge.green{ background:#e7f7ed; color:#137333; }
.badge.yellow{ background:#fff4d6; color:#8a5a00; }
.badge.red{ background:#fde8e8; color:#b91c1c; }
</style>
</head>

<body>
<div class="container">

<h1>å°åŒ—ä¸€å€ä¸Šç­å°åŠ©æ‰‹ğŸ’¼</h1>
<p class="subtitle">è¼¸å…¥æ•¸å­— â†’ ç”¢ç”Ÿè¨Šæ¯ â†’ è¤‡è£½è²¼åˆ°ä¼æ¥­å¾®ä¿¡ç¾¤çµ„</p>

<!-- ğŸ”¹ åˆ†é æŒ‰éˆ• -->
<header class="tab-header">
  <button id="tab-huddle" type="button">ä»Šæ—¥ç›®æ¨™</button>
  <button id="tab-report" type="button" class="active">æ¯æ—¥å›å ±</button>
</header>

<!-- ğŸ”¹ A. ä»Šæ—¥ç›®æ¨™ï¼ˆMorning Huddleï¼‰ -->
<section id="huddle-view" class="section hidden">
  <span class="mistletoe"></span>
  <h2>ä»Šæ—¥ç›®æ¨™</h2>
  <p style="font-size:13px;color:#555;margin-top:4px;">
    å·²è‡ªå‹•å¸¶å…¥æ˜¨å¤©å¡«å¯«çš„ã€Œæ˜æ—¥å·²æ’é ç´„ã€èˆ‡ã€Œæ˜æ—¥ KPIã€ã€‚
  </p>

  <!-- ç¬¬ä¸€çµ„ -->
  <div class="huddle-row">
    <span class="huddle-label">ä»Šæ—¥é ç´„æ•¸</span>
    <span class="huddle-value"><span id="huddleTodayBooking">-</span> ä½</span>
  </div>

  <div class="huddle-row">
    <span class="huddle-label">é‚€ç´„è©¦æˆ´ç›®æ¨™æ•¸</span>
    <span class="huddle-value"><span id="huddleTodayTrial">-</span> ä½</span>
  </div>

  <div class="huddle-separator"></div>

  <!-- ç¬¬äºŒçµ„ -->
  <div class="huddle-row">
    <span class="huddle-label">ä»Šæ—¥å¤–æ’¥ç›®æ¨™æ•¸</span>
    <span class="huddle-value"><span id="huddleTodayCallTotal">-</span> é€š</span>
  </div>

  <div class="huddle-row">
    <span class="huddle-label">é‚€ç´„å›åº—ç›®æ¨™æ•¸</span>
    <span class="huddle-value"><span id="huddleTodayOld3Y">-</span> ä½</span>
  </div>

  <div class="huddle-separator"></div>

  <!-- âœ… æ˜¨æ—¥åŸ·è¡Œæª¢è¦– -->
  <h2 style="margin-top:0;">æ˜¨æ—¥åŸ·è¡Œæª¢è¦–</h2>
  <p style="font-size:13px;color:#555;margin-top:4px;">
    ä»¥ã€Œå‰å¤©è¨­å®šçš„ KPIã€å°ç…§ã€Œæ˜¨å¤©å¯¦éš›å›å ±ã€ã€‚
  </p>

  <div class="check-row">
    <span class="check-label">è©¦æˆ´æ•¸</span>
    <span class="check-value" id="checkTrialText">-</span>
  </div>

  <div class="check-row">
    <span class="check-label">å¤–æ’¥é€šæ•¸</span>
    <span class="check-value" id="checkCallText">-</span>
  </div>

  <div class="check-row">
    <span class="check-label">é‚€ç´„å›åº—æ•¸</span>
    <span class="check-value" id="checkInviteText">-</span>
  </div>

  <div class="check-row">
    <span class="check-label">é‚€ç´„æˆåŠŸç‡</span>
    <span class="check-value">
      <span id="checkInviteRateText">-</span>
      <span class="badge" id="checkInviteRateBadge" style="display:none;"></span>
    </span>
  </div>
</section>

<!-- ğŸ”¹ B. æ¯æ—¥å›å ± -->
<div id="report-view">

  <div class="section">
    <span class="mistletoe"></span>
    <h2>åŸºæœ¬è³‡è¨Š</h2>
    <label>æ—¥æœŸï¼š <input type="date" id="date"></label>
    <label>åº—åï¼š <input type="text" id="store" placeholder="ä¾‹ï¼šç«™å‰"></label>
    <label>å§“åï¼š
      <select id="name">
        <option value="">è«‹é¸æ“‡åŒä»å§“å</option>
        <option>éƒ­å­Ÿé‘«</option><option>é™³è©©æ½”</option><option>æ¸¸ç‘Ÿç„„</option>
        <option>é­é æ©</option><option>æå­Ÿé¦¨</option><option>åŠ‰ç‘‹å©·</option>
        <option>æ—ç‘€å©•</option><option>å‘¨æ›‰ç„</option><option>è•­ç´”è¿</option>
        <option>é™³å®›å¦¤</option><option>ç‹é–é›…</option><option>æ—å¯“è‘³</option>
        <option>å³æ¬£ç®</option><option>å‘‚æ¡‚æ¢…</option>
      </select>
    </label>
  </div>

  <div class="section">
    <span class="mistletoe"></span>
    <h2>1. ä»Šæ—¥å¤–æ’¥</h2>
    <label>æ½›å®¢å¤–æ’¥é€šæ•¸ï¼š<input type="number" id="todayCallPotential" inputmode="numeric" oninput="recalcTotals()"></label>
    <label>éä¿èˆŠå®¢å¤–æ’¥é€šæ•¸ï¼š<input type="number" id="todayCallOld3Y" inputmode="numeric" oninput="recalcTotals()"></label>
    <label>ä»Šæ—¥å¤–æ’¥ç¸½é€šæ•¸ï¼š<input type="number" id="todayCallTotal" readonly></label>
    <!-- âœ… æ–°å¢ï¼ˆä¸æœƒå‡ºç¾åœ¨ç”¢ç”Ÿè¨Šæ¯ä¸­ï¼‰ -->
    <label>æˆåŠŸé‚€ç´„å›åº—äººæ•¸ï¼š<input type="number" id="todayInviteReturn" inputmode="numeric"></label>
  </div>

  <div class="section">
    <span class="mistletoe"></span>
    <h2>2. ä»Šæ—¥é ç´„</h2>
    <label>ä»Šæ—¥é ç´„ç¸½æ•¸ï¼š<input type="number" id="todayBookingTotal" inputmode="numeric"></label>
    <!-- ğŸ”¹ è‡ªå‹•å¸¶å…¥æç¤ºï¼ˆé è¨­éš±è—ï¼‰ -->
    <div id="todayBookingHint" style="font-size:12px;color:#666;margin-top:4px;display:none;">
      ï¼ˆå·²å¸¶å…¥æ˜¨æ—¥å¡«å¯«çš„ã€Œæ˜æ—¥å·²æ’é ç´„ã€ï¼š<span id="todayBookingHintValue"></span> ä½ï¼‰
    </div>
  </div>

  <div class="section">
    <span class="mistletoe"></span>
    <h2>3. ä»Šæ—¥åˆ°åº—</h2>
    <label>ä»Šæ—¥åˆ°åº—ç¸½æ•¸ï¼š<input type="number" id="todayVisitTotal" inputmode="numeric"></label>
    <label>è©¦ç”¨ HAï¼š<input type="number" id="trialHA" inputmode="numeric"></label>
    <label>è©¦ç”¨ APAPï¼š<input type="number" id="trialAPAP" inputmode="numeric"></label>
    <label>æˆäº¤ HAï¼š<input type="number" id="dealHA" inputmode="numeric"></label>
    <label>æˆäº¤ APAPï¼š<input type="number" id="dealAPAP" inputmode="numeric"></label>
  </div>

  <div class="section">
    <span class="mistletoe"></span>
    <h2>4. æ˜æ—¥å·²æ’é ç´„</h2>
    <label>æ˜æ—¥é ç´„ç¸½æ•¸ï¼š<input type="number" id="tomorrowBookingTotal" inputmode="numeric"></label>
  </div>

  <div class="section">
    <span class="mistletoe"></span>
    <h2>5. æ˜æ—¥ KPI</h2>
    <label>å¤–æ’¥ç›®æ¨™é€šæ•¸ï¼š<input type="number" id="tomorrowKpiCallTotal" inputmode="numeric"></label>
    <label>é‚€ç´„å›åº—ç›®æ¨™æ•¸ (ä½)ï¼š<input type="number" id="tomorrowKpiCallOld3Y" inputmode="numeric"></label>
    <label>å®ŒæˆHA/APAPè©¦æˆ´ç›®æ¨™ (ä½)ï¼š<input type="number" id="tomorrowKpiTrial" inputmode="numeric"></label>
  </div>

  <div class="section">
    <span class="mistletoe"></span>
    <textarea id="output" placeholder="æŒ‰ä¸‹ã€ç”¢ç”Ÿè¨Šæ¯ã€å¾Œæ–‡å­—æœƒå‡ºç¾åœ¨é€™è£¡"></textarea>
  </div>

</div><!-- /#report-view -->

</div><!-- /.container -->

<div class="actions">
  <button class="btn-primary" onclick="generateMessage()">â›„ï¸ ç”¢ç”Ÿè¨Šæ¯</button>
  <button class="btn-secondary" onclick="copyMessage()">â˜ƒï¸ è¤‡è£½æ–‡å­—</button>
</div>

<!-- â„ Snow Layer -->
<div class="snow">
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
  <span></span><span></span><span></span><span></span><span></span>
</div>

<!-- âœ… æ­£å¼ç‰ˆæ”¹ç”¨å¤–éƒ¨ app.js -->
<script src="app.js?v=1"></script>

</body>
</html>